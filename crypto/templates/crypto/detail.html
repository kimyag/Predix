{% extends 'crypto/base.html' %}
{% load static %}
{% block content %}
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script language="JavaScript">
      google.charts.load('current', {'packages':['line', 'corechart']});
      google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
      var button = document.getElementById('change-chart');
      var chartDiv = document.getElementById('chart_div');

      var data = new google.visualization.DataTable();
      data.addColumn('date', 'Month');
      data.addColumn('number', "Price");
      var dt = JSON.parse("{{labels| escapejs}}");
      var dataa = [];
      dataa=JSON.parse("{{data}}");
      let dtt = []
     for (let i = 0; i < dt.length; i++) {
        dtt.push([new Date(dt[i]), dataa[i]]);
    }
    data.addRows(dtt);

      var materialOptions = {
        width: 900,
        height: 500,
        series: {
          // Gives each series an axis name that matches the Y-axis below.
          0: {axis: 'Price'},
          1: {axis: 'Time'}
        },
        axes: {
          // Adds labels to each axis; they don't have to match the axis names.
          y: {
            Price: {label: 'Price'},
            Time: {label: 'Time'}
          }
        }
      };

      
      function drawMaterialChart() {
        var materialChart = new google.charts.Line(chartDiv);
        materialChart.draw(data, materialOptions);
      }
      drawMaterialChart();
    }
  </script>
</br></br></br></br>
<div class="container">
  <div class="row">
  <div class = "col-md-9" align="left">
    <div id="chart_div"></div>
    <div class="align-content">
      <div class="box">
        <body onload="displayLineChart();">
          <canvas id="lineChart" height="450" width="800"></canvas>
        </body>
      </div>
    </div>
    </div>
  <div class = "col-md-3" align="right" align = "center">
    <h4>Name: {{jsonData.name}}</h4>
    <h4>ID: {{jsonData.id}}</h4>
    <h4>Symbol: {{jsonData.symbol}}</h4>
    <h4>Date Added: {{jsonData.date_added}}</h4>
    <h4>Max Supply: {{jsonData.max_supply}}</h4>
    <h4>Circulating Supply: {{jsonData.circulating_supply}}</h4>
    <h4>Total Supply: {{jsonData.total_supply}}</h4>
    <h4>Last Updated: {{jsonData.last_updated}}</h4>
    </div>
  </div>
  <ul class="list-group list-group-flush">
{% for post in news %}
  <!--will redirect to the details of the news-->
  <li class="list-group-item"><a href="{% url 'crypto:news_detail' post.id %}">{{post}}
  </li>
{% endfor %}
</ul>
</div>


{% endblock %}
